"use strict";(self.webpackChunkjoyride=self.webpackChunkjoyride||[]).push([[471],{471:(e,t,n)=>{n.r(t),n.d(t,{CSS3DObject:()=>l,CSS3DRenderer:()=>m,CSS3DSprite:()=>a});var r=n(477);const s=new r.Vector3,o=new r.Quaternion,i=new r.Vector3;class l extends r.Object3D{constructor(e=document.createElement("div")){super(),this.element=e,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",(function(){this.traverse((function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)}))}))}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this}}l.prototype.isCSS3DObject=!0;class a extends l{constructor(e){super(e),this.rotation2D=0}copy(e,t){return super.copy(e,t),this.rotation2D=e.rotation2D,this}}a.prototype.isCSS3DSprite=!0;const c=new r.Matrix4,p=new r.Matrix4;class m{constructor(e={}){const t=this;let n,r,l,a;const m={camera:{fov:0,style:""},objects:new WeakMap},d=void 0!==e.element?e.element:document.createElement("div");d.style.overflow="hidden",this.domElement=d;const h=document.createElement("div");function u(e){return Math.abs(e)<1e-10?0:e}function y(e){const t=e.elements;return"matrix3d("+u(t[0])+","+u(-t[1])+","+u(t[2])+","+u(t[3])+","+u(t[4])+","+u(-t[5])+","+u(t[6])+","+u(t[7])+","+u(t[8])+","+u(-t[9])+","+u(t[10])+","+u(t[11])+","+u(t[12])+","+u(-t[13])+","+u(t[14])+","+u(t[15])+")"}function f(e){const t=e.elements;return"translate(-50%,-50%)matrix3d("+u(t[0])+","+u(t[1])+","+u(t[2])+","+u(t[3])+","+u(-t[4])+","+u(-t[5])+","+u(-t[6])+","+u(-t[7])+","+u(t[8])+","+u(t[9])+","+u(t[10])+","+u(t[11])+","+u(t[12])+","+u(t[13])+","+u(t[14])+","+u(t[15])+")"}function x(e,n,r,l){if(e.isCSS3DObject){const l=!0===e.visible&&!0===e.layers.test(r.layers);if(e.element.style.display=!0===l?"":"none",!0===l){let l;e.onBeforeRender(t,n,r),e.isCSS3DSprite?(c.copy(r.matrixWorldInverse),c.transpose(),0!==e.rotation2D&&c.multiply(p.makeRotationZ(e.rotation2D)),e.matrixWorld.decompose(s,o,i),c.setPosition(s),c.scale(i),c.elements[3]=0,c.elements[7]=0,c.elements[11]=0,c.elements[15]=1,l=f(c)):l=f(e.matrixWorld);const a=e.element,d=m.objects.get(e);if(void 0===d||d.style!==l){a.style.transform=l;const t={style:l};m.objects.set(e,t)}a.parentNode!==h&&h.appendChild(a),e.onAfterRender(t,n,r)}}for(let t=0,s=e.children.length;t<s;t++)x(e.children[t],n,r,l)}h.style.transformStyle="preserve-3d",h.style.pointerEvents="none",d.appendChild(h),this.getSize=function(){return{width:n,height:r}},this.render=function(e,t){const n=t.projectionMatrix.elements[5]*a;let r,s;m.camera.fov!==n&&(d.style.perspective=t.isPerspectiveCamera?n+"px":"",m.camera.fov=n),!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),t.isOrthographicCamera&&(r=-(t.right+t.left)/2,s=(t.top+t.bottom)/2);const o=t.isOrthographicCamera?"scale("+n+")translate("+u(r)+"px,"+u(s)+"px)"+y(t.matrixWorldInverse):"translateZ("+n+"px)"+y(t.matrixWorldInverse),i=o+"translate("+l+"px,"+a+"px)";m.camera.style!==i&&(h.style.transform=i,m.camera.style=i),x(e,e,t,o)},this.setSize=function(e,t){n=e,r=t,l=n/2,a=r/2,d.style.width=e+"px",d.style.height=t+"px",h.style.width=e+"px",h.style.height=t+"px"}}}}}]);