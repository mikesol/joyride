"use strict";(self.webpackChunkjoyride=self.webpackChunkjoyride||[]).push([[802,245],{9574:(t,e,s)=>{s.d(e,{p:()=>r});class r{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const s=this._listeners;void 0===s[t]&&(s[t]=[]),-1===s[t].indexOf(e)&&s[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const s=this._listeners;return void 0!==s[t]&&-1!==s[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const s=this._listeners[t];if(void 0!==s){const t=s.indexOf(e);-1!==t&&s.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const s=e.slice(0);for(let e=0,r=s.length;e<r;e++)s[e].call(this,t);t.target=null}}}},4691:(t,e,s)=>{s.d(e,{S:()=>r});class r{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}},3802:(t,e,s)=>{s.d(e,{T:()=>O});var r=s(3163),i=s(4532),n=s(1245),a=s(9574),o=s(9542);const h=new n.Matrix4,l=new r.Quaternion;class u{constructor(t=0,e=0,s=0,r=u.DefaultOrder){this._x=t,this._y=e,this._z=s,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,s,r=this._order){return this._x=t,this._y=e,this._z=s,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,s=!0){const r=t.elements,i=r[0],n=r[4],a=r[8],h=r[1],l=r[5],u=r[9],c=r[2],m=r[6],d=r[10];switch(e){case"XYZ":this._y=Math.asin((0,o.uZ)(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-n,i)):(this._x=Math.atan2(m,l),this._z=0);break;case"YXZ":this._x=Math.asin(-(0,o.uZ)(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(h,l)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin((0,o.uZ)(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-n,l)):(this._y=0,this._z=Math.atan2(h,i));break;case"ZYX":this._y=Math.asin(-(0,o.uZ)(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(m,d),this._z=Math.atan2(h,i)):(this._x=0,this._z=Math.atan2(-n,l));break;case"YZX":this._z=Math.asin((0,o.uZ)(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-(0,o.uZ)(n,-1,1)),Math.abs(n)<.9999999?(this._x=Math.atan2(m,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===s&&this._onChangeCallback(),this}setFromQuaternion(t,e,s){return h.makeRotationFromQuaternion(t),this.setFromRotationMatrix(h,e,s)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return l.setFromEuler(this),this.setFromQuaternion(l,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}u.prototype.isEuler=!0,u.DefaultOrder="XYZ",u.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var c=s(4691),m=s(4894);let d=0;const p=new i.Vector3,x=new r.Quaternion,y=new n.Matrix4,M=new i.Vector3,_=new i.Vector3,g=new i.Vector3,f=new r.Quaternion,b=new i.Vector3(1,0,0),v=new i.Vector3(0,1,0),k=new i.Vector3(0,0,1),w={type:"added"},A={type:"removed"};class O extends a.p{constructor(){super(),Object.defineProperty(this,"id",{value:d++}),this.uuid=o.DO(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=O.DefaultUp.clone();const t=new i.Vector3,e=new u,s=new r.Quaternion,a=new i.Vector3(1,1,1);e._onChange((function(){s.setFromEuler(e,!1)})),s._onChange((function(){e.setFromQuaternion(s,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new n.Matrix4},normalMatrix:{value:new m.V}}),this.matrix=new n.Matrix4,this.matrixWorld=new n.Matrix4,this.matrixAutoUpdate=O.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new c.S,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return x.setFromAxisAngle(t,e),this.quaternion.multiply(x),this}rotateOnWorldAxis(t,e){return x.setFromAxisAngle(t,e),this.quaternion.premultiply(x),this}rotateX(t){return this.rotateOnAxis(b,t)}rotateY(t){return this.rotateOnAxis(v,t)}rotateZ(t){return this.rotateOnAxis(k,t)}translateOnAxis(t,e){return p.copy(t).applyQuaternion(this.quaternion),this.position.add(p.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(b,t)}translateY(t){return this.translateOnAxis(v,t)}translateZ(t){return this.translateOnAxis(k,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(y.copy(this.matrixWorld).invert())}lookAt(t,e,s){t.isVector3?M.copy(t):M.set(t,e,s);const r=this.parent;this.updateWorldMatrix(!0,!1),_.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?y.lookAt(_,M,this.up):y.lookAt(M,_,this.up),this.quaternion.setFromRotationMatrix(y),r&&(y.extractRotation(r.matrixWorld),x.setFromRotationMatrix(y),this.quaternion.premultiply(x.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(w)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(A)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(A)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),y.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),y.multiply(t.parent.matrixWorld)),t.applyMatrix4(y),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let s=0,r=this.children.length;s<r;s++){const r=this.children[s].getObjectByProperty(t,e);if(void 0!==r)return r}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_,t,g),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_,f,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let s=0,r=e.length;s<r;s++)e[s].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let s=0,r=e.length;s<r;s++)e[s].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let s=0,r=e.length;s<r;s++)e[s].updateMatrixWorld(t)}updateWorldMatrix(t,e){const s=this.parent;if(!0===t&&null!==s&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,s=t.length;e<s;e++)t[e].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"==typeof t,s={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},s.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(e,s){return void 0===e[s.uuid]&&(e[s.uuid]=s.toJSON(t)),s.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const s=e.shapes;if(Array.isArray(s))for(let e=0,r=s.length;e<r;e++){const r=s[e];i(t.shapes,r)}else i(t.shapes,s)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let s=0,r=this.material.length;s<r;s++)e.push(i(t.materials,this.material[s]));r.material=e}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const s=this.animations[e];r.animations.push(i(t.animations,s))}}if(e){const e=n(t.geometries),r=n(t.materials),i=n(t.textures),a=n(t.images),o=n(t.shapes),h=n(t.skeletons),l=n(t.animations),u=n(t.nodes);e.length>0&&(s.geometries=e),r.length>0&&(s.materials=r),i.length>0&&(s.textures=i),a.length>0&&(s.images=a),o.length>0&&(s.shapes=o),h.length>0&&(s.skeletons=h),l.length>0&&(s.animations=l),u.length>0&&(s.nodes=u)}return s.object=r,s;function n(t){const e=[];for(const s in t){const r=t[s];delete r.metadata,e.push(r)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const s=t.children[e];this.add(s.clone())}return this}}O.DefaultUp=new i.Vector3(0,1,0),O.DefaultMatrixAutoUpdate=!0,O.prototype.isObject3D=!0},4894:(t,e,s)=>{s.d(e,{V:()=>r});class r{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,s,r,i,n,a,o,h){const l=this.elements;return l[0]=t,l[1]=r,l[2]=a,l[3]=e,l[4]=i,l[5]=o,l[6]=s,l[7]=n,l[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,s=t.elements;return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e[4]=s[4],e[5]=s[5],e[6]=s[6],e[7]=s[7],e[8]=s[8],this}extractBasis(t,e,s){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const s=t.elements,r=e.elements,i=this.elements,n=s[0],a=s[3],o=s[6],h=s[1],l=s[4],u=s[7],c=s[2],m=s[5],d=s[8],p=r[0],x=r[3],y=r[6],M=r[1],_=r[4],g=r[7],f=r[2],b=r[5],v=r[8];return i[0]=n*p+a*M+o*f,i[3]=n*x+a*_+o*b,i[6]=n*y+a*g+o*v,i[1]=h*p+l*M+u*f,i[4]=h*x+l*_+u*b,i[7]=h*y+l*g+u*v,i[2]=c*p+m*M+d*f,i[5]=c*x+m*_+d*b,i[8]=c*y+m*g+d*v,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],s=t[1],r=t[2],i=t[3],n=t[4],a=t[5],o=t[6],h=t[7],l=t[8];return e*n*l-e*a*h-s*i*l+s*a*o+r*i*h-r*n*o}invert(){const t=this.elements,e=t[0],s=t[1],r=t[2],i=t[3],n=t[4],a=t[5],o=t[6],h=t[7],l=t[8],u=l*n-a*h,c=a*o-l*i,m=h*i-n*o,d=e*u+s*c+r*m;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);const p=1/d;return t[0]=u*p,t[1]=(r*h-l*s)*p,t[2]=(a*s-r*n)*p,t[3]=c*p,t[4]=(l*e-r*o)*p,t[5]=(r*i-a*e)*p,t[6]=m*p,t[7]=(s*o-h*e)*p,t[8]=(n*e-s*i)*p,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,s,r,i,n,a){const o=Math.cos(i),h=Math.sin(i);return this.set(s*o,s*h,-s*(o*n+h*a)+n+t,-r*h,r*o,-r*(-h*n+o*a)+a+e,0,0,1),this}scale(t,e){const s=this.elements;return s[0]*=t,s[3]*=t,s[6]*=t,s[1]*=e,s[4]*=e,s[7]*=e,this}rotate(t){const e=Math.cos(t),s=Math.sin(t),r=this.elements,i=r[0],n=r[3],a=r[6],o=r[1],h=r[4],l=r[7];return r[0]=e*i+s*o,r[3]=e*n+s*h,r[6]=e*a+s*l,r[1]=-s*i+e*o,r[4]=-s*n+e*h,r[7]=-s*a+e*l,this}translate(t,e){const s=this.elements;return s[0]+=t*s[2],s[3]+=t*s[5],s[6]+=t*s[8],s[1]+=e*s[2],s[4]+=e*s[5],s[7]+=e*s[8],this}equals(t){const e=this.elements,s=t.elements;for(let t=0;t<9;t++)if(e[t]!==s[t])return!1;return!0}fromArray(t,e=0){for(let s=0;s<9;s++)this.elements[s]=t[s+e];return this}toArray(t=[],e=0){const s=this.elements;return t[e]=s[0],t[e+1]=s[1],t[e+2]=s[2],t[e+3]=s[3],t[e+4]=s[4],t[e+5]=s[5],t[e+6]=s[6],t[e+7]=s[7],t[e+8]=s[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}r.prototype.isMatrix3=!0},1245:(t,e,s)=>{s.r(e),s.d(e,{Matrix4:()=>i});var r=s(4532);class i{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,s,r,i,n,a,o,h,l,u,c,m,d,p,x){const y=this.elements;return y[0]=t,y[4]=e,y[8]=s,y[12]=r,y[1]=i,y[5]=n,y[9]=a,y[13]=o,y[2]=h,y[6]=l,y[10]=u,y[14]=c,y[3]=m,y[7]=d,y[11]=p,y[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new i).fromArray(this.elements)}copy(t){const e=this.elements,s=t.elements;return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e[4]=s[4],e[5]=s[5],e[6]=s[6],e[7]=s[7],e[8]=s[8],e[9]=s[9],e[10]=s[10],e[11]=s[11],e[12]=s[12],e[13]=s[13],e[14]=s[14],e[15]=s[15],this}copyPosition(t){const e=this.elements,s=t.elements;return e[12]=s[12],e[13]=s[13],e[14]=s[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,s){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(t,e,s){return this.set(t.x,e.x,s.x,0,t.y,e.y,s.y,0,t.z,e.z,s.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,s=t.elements,r=1/n.setFromMatrixColumn(t,0).length(),i=1/n.setFromMatrixColumn(t,1).length(),a=1/n.setFromMatrixColumn(t,2).length();return e[0]=s[0]*r,e[1]=s[1]*r,e[2]=s[2]*r,e[3]=0,e[4]=s[4]*i,e[5]=s[5]*i,e[6]=s[6]*i,e[7]=0,e[8]=s[8]*a,e[9]=s[9]*a,e[10]=s[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,s=t.x,r=t.y,i=t.z,n=Math.cos(s),a=Math.sin(s),o=Math.cos(r),h=Math.sin(r),l=Math.cos(i),u=Math.sin(i);if("XYZ"===t.order){const t=n*l,s=n*u,r=a*l,i=a*u;e[0]=o*l,e[4]=-o*u,e[8]=h,e[1]=s+r*h,e[5]=t-i*h,e[9]=-a*o,e[2]=i-t*h,e[6]=r+s*h,e[10]=n*o}else if("YXZ"===t.order){const t=o*l,s=o*u,r=h*l,i=h*u;e[0]=t+i*a,e[4]=r*a-s,e[8]=n*h,e[1]=n*u,e[5]=n*l,e[9]=-a,e[2]=s*a-r,e[6]=i+t*a,e[10]=n*o}else if("ZXY"===t.order){const t=o*l,s=o*u,r=h*l,i=h*u;e[0]=t-i*a,e[4]=-n*u,e[8]=r+s*a,e[1]=s+r*a,e[5]=n*l,e[9]=i-t*a,e[2]=-n*h,e[6]=a,e[10]=n*o}else if("ZYX"===t.order){const t=n*l,s=n*u,r=a*l,i=a*u;e[0]=o*l,e[4]=r*h-s,e[8]=t*h+i,e[1]=o*u,e[5]=i*h+t,e[9]=s*h-r,e[2]=-h,e[6]=a*o,e[10]=n*o}else if("YZX"===t.order){const t=n*o,s=n*h,r=a*o,i=a*h;e[0]=o*l,e[4]=i-t*u,e[8]=r*u+s,e[1]=u,e[5]=n*l,e[9]=-a*l,e[2]=-h*l,e[6]=s*u+r,e[10]=t-i*u}else if("XZY"===t.order){const t=n*o,s=n*h,r=a*o,i=a*h;e[0]=o*l,e[4]=-u,e[8]=h*l,e[1]=t*u+i,e[5]=n*l,e[9]=s*u-r,e[2]=r*u-s,e[6]=a*l,e[10]=i*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(o,t,h)}lookAt(t,e,s){const r=this.elements;return c.subVectors(t,e),0===c.lengthSq()&&(c.z=1),c.normalize(),l.crossVectors(s,c),0===l.lengthSq()&&(1===Math.abs(s.z)?c.x+=1e-4:c.z+=1e-4,c.normalize(),l.crossVectors(s,c)),l.normalize(),u.crossVectors(c,l),r[0]=l.x,r[4]=u.x,r[8]=c.x,r[1]=l.y,r[5]=u.y,r[9]=c.y,r[2]=l.z,r[6]=u.z,r[10]=c.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const s=t.elements,r=e.elements,i=this.elements,n=s[0],a=s[4],o=s[8],h=s[12],l=s[1],u=s[5],c=s[9],m=s[13],d=s[2],p=s[6],x=s[10],y=s[14],M=s[3],_=s[7],g=s[11],f=s[15],b=r[0],v=r[4],k=r[8],w=r[12],A=r[1],O=r[5],z=r[9],C=r[13],W=r[2],F=r[6],E=r[10],S=r[14],R=r[3],V=r[7],Z=r[11],j=r[15];return i[0]=n*b+a*A+o*W+h*R,i[4]=n*v+a*O+o*F+h*V,i[8]=n*k+a*z+o*E+h*Z,i[12]=n*w+a*C+o*S+h*j,i[1]=l*b+u*A+c*W+m*R,i[5]=l*v+u*O+c*F+m*V,i[9]=l*k+u*z+c*E+m*Z,i[13]=l*w+u*C+c*S+m*j,i[2]=d*b+p*A+x*W+y*R,i[6]=d*v+p*O+x*F+y*V,i[10]=d*k+p*z+x*E+y*Z,i[14]=d*w+p*C+x*S+y*j,i[3]=M*b+_*A+g*W+f*R,i[7]=M*v+_*O+g*F+f*V,i[11]=M*k+_*z+g*E+f*Z,i[15]=M*w+_*C+g*S+f*j,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],s=t[4],r=t[8],i=t[12],n=t[1],a=t[5],o=t[9],h=t[13],l=t[2],u=t[6],c=t[10],m=t[14];return t[3]*(+i*o*u-r*h*u-i*a*c+s*h*c+r*a*m-s*o*m)+t[7]*(+e*o*m-e*h*c+i*n*c-r*n*m+r*h*l-i*o*l)+t[11]*(+e*h*u-e*a*m-i*n*u+s*n*m+i*a*l-s*h*l)+t[15]*(-r*a*l-e*o*u+e*a*c+r*n*u-s*n*c+s*o*l)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,s){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=s),this}invert(){const t=this.elements,e=t[0],s=t[1],r=t[2],i=t[3],n=t[4],a=t[5],o=t[6],h=t[7],l=t[8],u=t[9],c=t[10],m=t[11],d=t[12],p=t[13],x=t[14],y=t[15],M=u*x*h-p*c*h+p*o*m-a*x*m-u*o*y+a*c*y,_=d*c*h-l*x*h-d*o*m+n*x*m+l*o*y-n*c*y,g=l*p*h-d*u*h+d*a*m-n*p*m-l*a*y+n*u*y,f=d*u*o-l*p*o-d*a*c+n*p*c+l*a*x-n*u*x,b=e*M+s*_+r*g+i*f;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const v=1/b;return t[0]=M*v,t[1]=(p*c*i-u*x*i-p*r*m+s*x*m+u*r*y-s*c*y)*v,t[2]=(a*x*i-p*o*i+p*r*h-s*x*h-a*r*y+s*o*y)*v,t[3]=(u*o*i-a*c*i-u*r*h+s*c*h+a*r*m-s*o*m)*v,t[4]=_*v,t[5]=(l*x*i-d*c*i+d*r*m-e*x*m-l*r*y+e*c*y)*v,t[6]=(d*o*i-n*x*i-d*r*h+e*x*h+n*r*y-e*o*y)*v,t[7]=(n*c*i-l*o*i+l*r*h-e*c*h-n*r*m+e*o*m)*v,t[8]=g*v,t[9]=(d*u*i-l*p*i-d*s*m+e*p*m+l*s*y-e*u*y)*v,t[10]=(n*p*i-d*a*i+d*s*h-e*p*h-n*s*y+e*a*y)*v,t[11]=(l*a*i-n*u*i-l*s*h+e*u*h+n*s*m-e*a*m)*v,t[12]=f*v,t[13]=(l*p*r-d*u*r+d*s*c-e*p*c-l*s*x+e*u*x)*v,t[14]=(d*a*r-n*p*r-d*s*o+e*p*o+n*s*x-e*a*x)*v,t[15]=(n*u*r-l*a*r+l*s*o-e*u*o-n*s*c+e*a*c)*v,this}scale(t){const e=this.elements,s=t.x,r=t.y,i=t.z;return e[0]*=s,e[4]*=r,e[8]*=i,e[1]*=s,e[5]*=r,e[9]*=i,e[2]*=s,e[6]*=r,e[10]*=i,e[3]*=s,e[7]*=r,e[11]*=i,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],s=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,s,r))}makeTranslation(t,e,s){return this.set(1,0,0,t,0,1,0,e,0,0,1,s,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),s=Math.sin(t);return this.set(1,0,0,0,0,e,-s,0,0,s,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,0,s,0,0,1,0,0,-s,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,-s,0,0,s,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const s=Math.cos(e),r=Math.sin(e),i=1-s,n=t.x,a=t.y,o=t.z,h=i*n,l=i*a;return this.set(h*n+s,h*a-r*o,h*o+r*a,0,h*a+r*o,l*a+s,l*o-r*n,0,h*o-r*a,l*o+r*n,i*o*o+s,0,0,0,0,1),this}makeScale(t,e,s){return this.set(t,0,0,0,0,e,0,0,0,0,s,0,0,0,0,1),this}makeShear(t,e,s,r,i,n){return this.set(1,s,i,0,t,1,n,0,e,r,1,0,0,0,0,1),this}compose(t,e,s){const r=this.elements,i=e._x,n=e._y,a=e._z,o=e._w,h=i+i,l=n+n,u=a+a,c=i*h,m=i*l,d=i*u,p=n*l,x=n*u,y=a*u,M=o*h,_=o*l,g=o*u,f=s.x,b=s.y,v=s.z;return r[0]=(1-(p+y))*f,r[1]=(m+g)*f,r[2]=(d-_)*f,r[3]=0,r[4]=(m-g)*b,r[5]=(1-(c+y))*b,r[6]=(x+M)*b,r[7]=0,r[8]=(d+_)*v,r[9]=(x-M)*v,r[10]=(1-(c+p))*v,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,s){const r=this.elements;let i=n.set(r[0],r[1],r[2]).length();const o=n.set(r[4],r[5],r[6]).length(),h=n.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],a.copy(this);const l=1/i,u=1/o,c=1/h;return a.elements[0]*=l,a.elements[1]*=l,a.elements[2]*=l,a.elements[4]*=u,a.elements[5]*=u,a.elements[6]*=u,a.elements[8]*=c,a.elements[9]*=c,a.elements[10]*=c,e.setFromRotationMatrix(a),s.x=i,s.y=o,s.z=h,this}makePerspective(t,e,s,r,i,n){void 0===n&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,o=2*i/(e-t),h=2*i/(s-r),l=(e+t)/(e-t),u=(s+r)/(s-r),c=-(n+i)/(n-i),m=-2*n*i/(n-i);return a[0]=o,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=h,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=c,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,s,r,i,n){const a=this.elements,o=1/(e-t),h=1/(s-r),l=1/(n-i),u=(e+t)*o,c=(s+r)*h,m=(n+i)*l;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*h,a[9]=0,a[13]=-c,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-m,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,s=t.elements;for(let t=0;t<16;t++)if(e[t]!==s[t])return!1;return!0}fromArray(t,e=0){for(let s=0;s<16;s++)this.elements[s]=t[s+e];return this}toArray(t=[],e=0){const s=this.elements;return t[e]=s[0],t[e+1]=s[1],t[e+2]=s[2],t[e+3]=s[3],t[e+4]=s[4],t[e+5]=s[5],t[e+6]=s[6],t[e+7]=s[7],t[e+8]=s[8],t[e+9]=s[9],t[e+10]=s[10],t[e+11]=s[11],t[e+12]=s[12],t[e+13]=s[13],t[e+14]=s[14],t[e+15]=s[15],t}}i.prototype.isMatrix4=!0;const n=new r.Vector3,a=new i,o=new r.Vector3(0,0,0),h=new r.Vector3(1,1,1),l=new r.Vector3,u=new r.Vector3,c=new r.Vector3}}]);