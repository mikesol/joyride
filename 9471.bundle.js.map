{"version":3,"file":"9471.bundle.js","mappings":"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","sources":["webpack://joyride/./node_modules/three/examples/jsm/renderers/CSS3DRenderer.js"],"sourcesContent":["import {\n\tMatrix4,\n\tObject3D,\n\tQuaternion,\n\tVector3\n} from 'three';\n\n/**\n * Based on http://www.emagix.net/academic/mscs-project/item/camera-sync-with-css3-and-webgl-threejs\n */\n\nconst _position = new Vector3();\nconst _quaternion = new Quaternion();\nconst _scale = new Vector3();\n\nclass CSS3DObject extends Object3D {\n\n\tconstructor( element = document.createElement( 'div' ) ) {\n\n\t\tsuper();\n\n\t\tthis.element = element;\n\t\tthis.element.style.position = 'absolute';\n\t\tthis.element.style.pointerEvents = 'auto';\n\t\tthis.element.style.userSelect = 'none';\n\n\t\tthis.element.setAttribute( 'draggable', false );\n\n\t\tthis.addEventListener( 'removed', function () {\n\n\t\t\tthis.traverse( function ( object ) {\n\n\t\t\t\tif ( object.element instanceof Element && object.element.parentNode !== null ) {\n\n\t\t\t\t\tobject.element.parentNode.removeChild( object.element );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.element = source.element.cloneNode( true );\n\n\t\treturn this;\n\n\t}\n\n}\n\nCSS3DObject.prototype.isCSS3DObject = true;\n\nclass CSS3DSprite extends CSS3DObject {\n\n\tconstructor( element ) {\n\n\t\tsuper( element );\n\n\t\tthis.rotation2D = 0;\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.rotation2D = source.rotation2D;\n\n\t\treturn this;\n\n\t}\n\n}\n\nCSS3DSprite.prototype.isCSS3DSprite = true;\n\n//\n\nconst _matrix = new Matrix4();\nconst _matrix2 = new Matrix4();\n\nclass CSS3DRenderer {\n\n\tconstructor( parameters = {} ) {\n\n\t\tconst _this = this;\n\n\t\tlet _width, _height;\n\t\tlet _widthHalf, _heightHalf;\n\n\t\tconst cache = {\n\t\t\tcamera: { fov: 0, style: '' },\n\t\t\tobjects: new WeakMap()\n\t\t};\n\n\t\tconst domElement = parameters.element !== undefined ? parameters.element : document.createElement( 'div' );\n\n\t\tdomElement.style.overflow = 'hidden';\n\n\t\tthis.domElement = domElement;\n\n\t\tconst cameraElement = document.createElement( 'div' );\n\n\t\tcameraElement.style.transformStyle = 'preserve-3d';\n\t\tcameraElement.style.pointerEvents = 'none';\n\n\t\tdomElement.appendChild( cameraElement );\n\n\t\tthis.getSize = function () {\n\n\t\t\treturn {\n\t\t\t\twidth: _width,\n\t\t\t\theight: _height\n\t\t\t};\n\n\t\t};\n\n\t\tthis.render = function ( scene, camera ) {\n\n\t\t\tconst fov = camera.projectionMatrix.elements[ 5 ] * _heightHalf;\n\n\t\t\tif ( cache.camera.fov !== fov ) {\n\n\t\t\t\tdomElement.style.perspective = camera.isPerspectiveCamera ? fov + 'px' : '';\n\t\t\t\tcache.camera.fov = fov;\n\n\t\t\t}\n\n\t\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\t\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\t\tlet tx, ty;\n\n\t\t\tif ( camera.isOrthographicCamera ) {\n\n\t\t\t\ttx = - ( camera.right + camera.left ) / 2;\n\t\t\t\tty = ( camera.top + camera.bottom ) / 2;\n\n\t\t\t}\n\n\t\t\tconst cameraCSSMatrix = camera.isOrthographicCamera ?\n\t\t\t\t'scale(' + fov + ')' + 'translate(' + epsilon( tx ) + 'px,' + epsilon( ty ) + 'px)' + getCameraCSSMatrix( camera.matrixWorldInverse ) :\n\t\t\t\t'translateZ(' + fov + 'px)' + getCameraCSSMatrix( camera.matrixWorldInverse );\n\n\t\t\tconst style = cameraCSSMatrix +\n\t\t\t\t'translate(' + _widthHalf + 'px,' + _heightHalf + 'px)';\n\n\t\t\tif ( cache.camera.style !== style ) {\n\n\t\t\t\tcameraElement.style.transform = style;\n\n\t\t\t\tcache.camera.style = style;\n\n\t\t\t}\n\n\t\t\trenderObject( scene, scene, camera, cameraCSSMatrix );\n\n\t\t};\n\n\t\tthis.setSize = function ( width, height ) {\n\n\t\t\t_width = width;\n\t\t\t_height = height;\n\t\t\t_widthHalf = _width / 2;\n\t\t\t_heightHalf = _height / 2;\n\n\t\t\tdomElement.style.width = width + 'px';\n\t\t\tdomElement.style.height = height + 'px';\n\n\t\t\tcameraElement.style.width = width + 'px';\n\t\t\tcameraElement.style.height = height + 'px';\n\n\t\t};\n\n\t\tfunction epsilon( value ) {\n\n\t\t\treturn Math.abs( value ) < 1e-10 ? 0 : value;\n\n\t\t}\n\n\t\tfunction getCameraCSSMatrix( matrix ) {\n\n\t\t\tconst elements = matrix.elements;\n\n\t\t\treturn 'matrix3d(' +\n\t\t\t\tepsilon( elements[ 0 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 1 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 2 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 3 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 4 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 5 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 6 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 7 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 8 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 9 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 10 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 11 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 12 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 13 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 14 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 15 ] ) +\n\t\t\t')';\n\n\t\t}\n\n\t\tfunction getObjectCSSMatrix( matrix ) {\n\n\t\t\tconst elements = matrix.elements;\n\t\t\tconst matrix3d = 'matrix3d(' +\n\t\t\t\tepsilon( elements[ 0 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 1 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 2 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 3 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 4 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 5 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 6 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 7 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 8 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 9 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 10 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 11 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 12 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 13 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 14 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 15 ] ) +\n\t\t\t')';\n\n\t\t\treturn 'translate(-50%,-50%)' + matrix3d;\n\n\t\t}\n\n\t\tfunction renderObject( object, scene, camera, cameraCSSMatrix ) {\n\n\t\t\tif ( object.isCSS3DObject ) {\n\n\t\t\t\tconst visible = ( object.visible === true ) && ( object.layers.test( camera.layers ) === true );\n\t\t\t\tobject.element.style.display = ( visible === true ) ? '' : 'none';\n\n\t\t\t\tif ( visible === true ) {\n\n\t\t\t\t\tobject.onBeforeRender( _this, scene, camera );\n\n\t\t\t\t\tlet style;\n\n\t\t\t\t\tif ( object.isCSS3DSprite ) {\n\n\t\t\t\t\t\t// http://swiftcoder.wordpress.com/2008/11/25/constructing-a-billboard-matrix/\n\n\t\t\t\t\t\t_matrix.copy( camera.matrixWorldInverse );\n\t\t\t\t\t\t_matrix.transpose();\n\n\t\t\t\t\t\tif ( object.rotation2D !== 0 ) _matrix.multiply( _matrix2.makeRotationZ( object.rotation2D ) );\n\n\t\t\t\t\t\tobject.matrixWorld.decompose( _position, _quaternion, _scale );\n\t\t\t\t\t\t_matrix.setPosition( _position );\n\t\t\t\t\t\t_matrix.scale( _scale );\n\n\t\t\t\t\t\t_matrix.elements[ 3 ] = 0;\n\t\t\t\t\t\t_matrix.elements[ 7 ] = 0;\n\t\t\t\t\t\t_matrix.elements[ 11 ] = 0;\n\t\t\t\t\t\t_matrix.elements[ 15 ] = 1;\n\n\t\t\t\t\t\tstyle = getObjectCSSMatrix( _matrix );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstyle = getObjectCSSMatrix( object.matrixWorld );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst element = object.element;\n\t\t\t\t\tconst cachedObject = cache.objects.get( object );\n\n\t\t\t\t\tif ( cachedObject === undefined || cachedObject.style !== style ) {\n\n\t\t\t\t\t\telement.style.transform = style;\n\n\t\t\t\t\t\tconst objectData = { style: style };\n\t\t\t\t\t\tcache.objects.set( object, objectData );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( element.parentNode !== cameraElement ) {\n\n\t\t\t\t\t\tcameraElement.appendChild( element );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject.onAfterRender( _this, scene, camera );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\t\trenderObject( object.children[ i ], scene, camera, cameraCSSMatrix );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nexport { CSS3DObject, CSS3DSprite, CSS3DRenderer };\n"],"names":["_position","_quaternion","_scale","CSS3DObject","constructor","element","document","createElement","super","this","style","position","pointerEvents","userSelect","setAttribute","addEventListener","traverse","object","Element","parentNode","removeChild","copy","source","recursive","cloneNode","prototype","isCSS3DObject","CSS3DSprite","rotation2D","isCSS3DSprite","_matrix","_matrix2","CSS3DRenderer","parameters","_this","_width","_height","_widthHalf","_heightHalf","cache","camera","fov","objects","WeakMap","domElement","undefined","overflow","cameraElement","epsilon","value","Math","abs","getCameraCSSMatrix","matrix","elements","getObjectCSSMatrix","renderObject","scene","cameraCSSMatrix","visible","layers","test","display","onBeforeRender","matrixWorldInverse","transpose","multiply","makeRotationZ","matrixWorld","decompose","setPosition","scale","cachedObject","get","transform","objectData","set","appendChild","onAfterRender","i","l","children","length","transformStyle","getSize","width","height","render","projectionMatrix","tx","ty","perspective","isPerspectiveCamera","autoUpdate","updateMatrixWorld","parent","isOrthographicCamera","right","left","top","bottom","setSize"],"sourceRoot":""}